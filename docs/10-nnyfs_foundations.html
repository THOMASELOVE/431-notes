<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Notes for 431 - 10&nbsp; National Youth Fitness Survey</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./11-assessingnormality.html" rel="next">
<link href="./09-missing_data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">National Youth Fitness Survey</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Notes for 431</a> 
        <div class="sidebar-tools-main">
    <a href="./431-notes.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Working with These Notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./int_r_setup.html" class="sidebar-item-text sidebar-link">Setting Up R</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-datascience.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Science and 431</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Part A. Exploring Data</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-penguins1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Palmer Penguins</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-penguins2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Summarizing Penguins</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-nhanes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">NHANES: A First Look</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-data_types.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Structures, Variable Types &amp; Sampling NHANES</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-nhanes_cc.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Visualizing NHANES Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-summarizing_quantities.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Summarizing Quantities</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-summarizing_categories.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Summarizing Categories</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-missing_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Missing Data and Single Imputation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-nnyfs_foundations.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">National Youth Fitness Survey</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-assessingnormality.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Assessing Normality</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-straightlinemodels.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Straight Line Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-linear_trans.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Linearizing Transformations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-crabs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Studying Crab Claws</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-hydrate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Dehydration Recovery</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-wcgs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">The WCGS</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Part B. Comparing Summaries</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-ci_for_mean.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Confidence Intervals for a Mean</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-ibuprofen_sepsis.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Ibuprofen in Sepsis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-pairedsamples.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Comparing Means with Paired Samples</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-samplesize.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Hypothesis Testing: What is it good for?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-examples_2means.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Two Examples Comparing Means</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-anova.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Analysis of Variance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-one_proportion.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Estimating a Population Proportion</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-comparing_rates.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Comparing Proportions with Two Independent Samples</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-power_for_rates.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Power and Proportions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-contingency_tables.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Larger Contingency Tables</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Part C. Building Models</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-mult_reg_intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Multiple Regression: Introduction</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./98_gettingdataintoR.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Getting Data Into R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setup-packages-used-here" id="toc-setup-packages-used-here" class="nav-link active" data-scroll-target="#setup-packages-used-here"> <span class="header-section-number">10.1</span> Setup: Packages Used Here</a></li>
  <li><a href="#what-is-the-nhanes-nyfs" id="toc-what-is-the-nhanes-nyfs" class="nav-link" data-scroll-target="#what-is-the-nhanes-nyfs"> <span class="header-section-number">10.2</span> What is the NHANES NYFS?</a></li>
  <li><a href="#the-variables-included-in-nnyfs" id="toc-the-variables-included-in-nnyfs" class="nav-link" data-scroll-target="#the-variables-included-in-nnyfs"> <span class="header-section-number">10.3</span> The Variables included in <code>nnyfs</code></a>
  <ul class="collapse">
  <li><a href="#from-the-nnyfs-demographic-component" id="toc-from-the-nnyfs-demographic-component" class="nav-link" data-scroll-target="#from-the-nnyfs-demographic-component"> <span class="header-section-number">10.3.1</span> From the <span>NNYFS Demographic Component</span></a></li>
  <li><a href="#from-the-nnyfs-dietary-component" id="toc-from-the-nnyfs-dietary-component" class="nav-link" data-scroll-target="#from-the-nnyfs-dietary-component"> <span class="header-section-number">10.3.2</span> From the <span>NNYFS Dietary Component</span></a></li>
  <li><a href="#from-the-nnyfs-examination-component" id="toc-from-the-nnyfs-examination-component" class="nav-link" data-scroll-target="#from-the-nnyfs-examination-component"> <span class="header-section-number">10.3.3</span> From the <span>NNYFS Examination Component</span></a></li>
  <li><a href="#from-the-nnyfs-questionnaire-component" id="toc-from-the-nnyfs-questionnaire-component" class="nav-link" data-scroll-target="#from-the-nnyfs-questionnaire-component"> <span class="header-section-number">10.3.4</span> From the <span>NNYFS Questionnaire Component</span></a></li>
  </ul></li>
  <li><a href="#looking-over-a-few-variables" id="toc-looking-over-a-few-variables" class="nav-link" data-scroll-target="#looking-over-a-few-variables"> <span class="header-section-number">10.4</span> Looking over A Few Variables</a>
  <ul class="collapse">
  <li><a href="#seqn" id="toc-seqn" class="nav-link" data-scroll-target="#seqn"> <span class="header-section-number">10.4.1</span> <code>SEQN</code></a></li>
  <li><a href="#sex" id="toc-sex" class="nav-link" data-scroll-target="#sex"> <span class="header-section-number">10.4.2</span> <code>sex</code></a></li>
  <li><a href="#age_child" id="toc-age_child" class="nav-link" data-scroll-target="#age_child"> <span class="header-section-number">10.4.3</span> <code>age_child</code></a></li>
  <li><a href="#race_eth" id="toc-race_eth" class="nav-link" data-scroll-target="#race_eth"> <span class="header-section-number">10.4.4</span> <code>race_eth</code></a></li>
  <li><a href="#income_pov" id="toc-income_pov" class="nav-link" data-scroll-target="#income_pov"> <span class="header-section-number">10.4.5</span> <code>income_pov</code></a></li>
  <li><a href="#bmi" id="toc-bmi" class="nav-link" data-scroll-target="#bmi"> <span class="header-section-number">10.4.6</span> <code>bmi</code></a></li>
  <li><a href="#bmi_cat" id="toc-bmi_cat" class="nav-link" data-scroll-target="#bmi_cat"> <span class="header-section-number">10.4.7</span> <code>bmi_cat</code></a></li>
  <li><a href="#waist" id="toc-waist" class="nav-link" data-scroll-target="#waist"> <span class="header-section-number">10.4.8</span> <code>waist</code></a></li>
  <li><a href="#triceps_skinfold" id="toc-triceps_skinfold" class="nav-link" data-scroll-target="#triceps_skinfold"> <span class="header-section-number">10.4.9</span> <code>triceps_skinfold</code></a></li>
  </ul></li>
  <li><a href="#additional-numeric-summaries" id="toc-additional-numeric-summaries" class="nav-link" data-scroll-target="#additional-numeric-summaries"> <span class="header-section-number">10.5</span> Additional Numeric Summaries</a>
  <ul class="collapse">
  <li><a href="#the-five-number-summary-quantiles-and-iqr" id="toc-the-five-number-summary-quantiles-and-iqr" class="nav-link" data-scroll-target="#the-five-number-summary-quantiles-and-iqr"> <span class="header-section-number">10.5.1</span> The Five Number Summary, Quantiles and IQR</a></li>
  </ul></li>
  <li><a href="#additional-summaries-from-favstats" id="toc-additional-summaries-from-favstats" class="nav-link" data-scroll-target="#additional-summaries-from-favstats"> <span class="header-section-number">10.6</span> Additional Summaries from <code>favstats</code></a></li>
  <li><a href="#the-histogram" id="toc-the-histogram" class="nav-link" data-scroll-target="#the-histogram"> <span class="header-section-number">10.7</span> The Histogram</a>
  <ul class="collapse">
  <li><a href="#freedman-diaconis-rule-to-select-bin-width" id="toc-freedman-diaconis-rule-to-select-bin-width" class="nav-link" data-scroll-target="#freedman-diaconis-rule-to-select-bin-width"> <span class="header-section-number">10.7.1</span> Freedman-Diaconis Rule to select bin width</a></li>
  <li><a href="#a-note-on-colors" id="toc-a-note-on-colors" class="nav-link" data-scroll-target="#a-note-on-colors"> <span class="header-section-number">10.7.2</span> A Note on Colors</a></li>
  </ul></li>
  <li><a href="#the-frequency-polygon" id="toc-the-frequency-polygon" class="nav-link" data-scroll-target="#the-frequency-polygon"> <span class="header-section-number">10.8</span> The Frequency Polygon</a></li>
  <li><a href="#plotting-the-probability-density-function" id="toc-plotting-the-probability-density-function" class="nav-link" data-scroll-target="#plotting-the-probability-density-function"> <span class="header-section-number">10.9</span> Plotting the Probability Density Function</a></li>
  <li><a href="#the-boxplot" id="toc-the-boxplot" class="nav-link" data-scroll-target="#the-boxplot"> <span class="header-section-number">10.10</span> The Boxplot</a>
  <ul class="collapse">
  <li><a href="#drawing-a-boxplot-for-one-variable-in-ggplot2" id="toc-drawing-a-boxplot-for-one-variable-in-ggplot2" class="nav-link" data-scroll-target="#drawing-a-boxplot-for-one-variable-in-ggplot2"> <span class="header-section-number">10.10.1</span> Drawing a Boxplot for One Variable in <code>ggplot2</code></a></li>
  <li><a href="#about-the-boxplot" id="toc-about-the-boxplot" class="nav-link" data-scroll-target="#about-the-boxplot"> <span class="header-section-number">10.10.2</span> About the Boxplot</a></li>
  </ul></li>
  <li><a href="#a-simple-comparison-boxplot" id="toc-a-simple-comparison-boxplot" class="nav-link" data-scroll-target="#a-simple-comparison-boxplot"> <span class="header-section-number">10.11</span> A Simple Comparison Boxplot</a></li>
  <li><a href="#using-describe-in-the-psych-library" id="toc-using-describe-in-the-psych-library" class="nav-link" data-scroll-target="#using-describe-in-the-psych-library"> <span class="header-section-number">10.12</span> Using <code>describe</code> in the <code>psych</code> library</a>
  <ul class="collapse">
  <li><a href="#the-trimmed-mean" id="toc-the-trimmed-mean" class="nav-link" data-scroll-target="#the-trimmed-mean"> <span class="header-section-number">10.12.1</span> The Trimmed Mean</a></li>
  <li><a href="#the-median-absolute-deviation" id="toc-the-median-absolute-deviation" class="nav-link" data-scroll-target="#the-median-absolute-deviation"> <span class="header-section-number">10.12.2</span> The Median Absolute Deviation</a></li>
  </ul></li>
  <li><a href="#assessing-skew" id="toc-assessing-skew" class="nav-link" data-scroll-target="#assessing-skew"> <span class="header-section-number">10.13</span> Assessing Skew</a>
  <ul class="collapse">
  <li><a href="#non-parametric-skewness" id="toc-non-parametric-skewness" class="nav-link" data-scroll-target="#non-parametric-skewness"> <span class="header-section-number">10.13.1</span> Non-parametric Skewness</a></li>
  </ul></li>
  <li><a href="#assessing-kurtosis-heavy-tailedness" id="toc-assessing-kurtosis-heavy-tailedness" class="nav-link" data-scroll-target="#assessing-kurtosis-heavy-tailedness"> <span class="header-section-number">10.14</span> Assessing Kurtosis (Heavy-Tailedness)</a>
  <ul class="collapse">
  <li><a href="#the-standard-error-of-the-sample-mean" id="toc-the-standard-error-of-the-sample-mean" class="nav-link" data-scroll-target="#the-standard-error-of-the-sample-mean"> <span class="header-section-number">10.14.1</span> The Standard Error of the Sample Mean</a></li>
  </ul></li>
  <li><a href="#the-describe-function-in-the-hmisc-package" id="toc-the-describe-function-in-the-hmisc-package" class="nav-link" data-scroll-target="#the-describe-function-in-the-hmisc-package"> <span class="header-section-number">10.15</span> The <code>describe</code> function in the <code>Hmisc</code> package</a></li>
  <li><a href="#summarizing-data-within-subgroups" id="toc-summarizing-data-within-subgroups" class="nav-link" data-scroll-target="#summarizing-data-within-subgroups"> <span class="header-section-number">10.16</span> Summarizing data within subgroups</a></li>
  <li><a href="#another-example" id="toc-another-example" class="nav-link" data-scroll-target="#another-example"> <span class="header-section-number">10.17</span> Another Example</a></li>
  <li><a href="#boxplots-to-relate-an-outcome-to-a-categorical-predictor" id="toc-boxplots-to-relate-an-outcome-to-a-categorical-predictor" class="nav-link" data-scroll-target="#boxplots-to-relate-an-outcome-to-a-categorical-predictor"> <span class="header-section-number">10.18</span> Boxplots to Relate an Outcome to a Categorical Predictor</a>
  <ul class="collapse">
  <li><a href="#augmenting-the-boxplot-with-the-sample-mean" id="toc-augmenting-the-boxplot-with-the-sample-mean" class="nav-link" data-scroll-target="#augmenting-the-boxplot-with-the-sample-mean"> <span class="header-section-number">10.18.1</span> Augmenting the Boxplot with the Sample Mean</a></li>
  </ul></li>
  <li><a href="#building-a-violin-plot" id="toc-building-a-violin-plot" class="nav-link" data-scroll-target="#building-a-violin-plot"> <span class="header-section-number">10.19</span> Building a Violin Plot</a>
  <ul class="collapse">
  <li><a href="#adding-notches-to-a-boxplot" id="toc-adding-notches-to-a-boxplot" class="nav-link" data-scroll-target="#adding-notches-to-a-boxplot"> <span class="header-section-number">10.19.1</span> Adding Notches to a Boxplot</a></li>
  </ul></li>
  <li><a href="#using-multiple-histograms-to-make-comparisons" id="toc-using-multiple-histograms-to-make-comparisons" class="nav-link" data-scroll-target="#using-multiple-histograms-to-make-comparisons"> <span class="header-section-number">10.20</span> Using Multiple Histograms to Make Comparisons</a></li>
  <li><a href="#using-multiple-density-plots-to-make-comparisons" id="toc-using-multiple-density-plots-to-make-comparisons" class="nav-link" data-scroll-target="#using-multiple-density-plots-to-make-comparisons"> <span class="header-section-number">10.21</span> Using Multiple Density Plots to Make Comparisons</a></li>
  <li><a href="#a-ridgeline-plot" id="toc-a-ridgeline-plot" class="nav-link" data-scroll-target="#a-ridgeline-plot"> <span class="header-section-number">10.22</span> A Ridgeline Plot</a></li>
  <li><a href="#what-summaries-to-report" id="toc-what-summaries-to-report" class="nav-link" data-scroll-target="#what-summaries-to-report"> <span class="header-section-number">10.23</span> What Summaries to Report</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="NYFS-Study" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">National Youth Fitness Survey</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="setup-packages-used-here" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="setup-packages-used-here"><span class="header-section-number">10.1</span> Setup: Packages Used Here</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">comment =</span> <span class="cn">NA</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We also use functions from the <code>Hmisc</code> and <code>mosaic</code> packages in this chapter, but do not load the whole packages.</p>
</section>
<section id="what-is-the-nhanes-nyfs" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="what-is-the-nhanes-nyfs"><span class="header-section-number">10.2</span> What is the NHANES NYFS?</h2>
<p>The <code>nnyfs.csv</code> and the <code>nnyfs.Rds</code> data files were built by Professor Love using data from the <a href="http://www.cdc.gov/Nchs/Nnyfs.htm">2012 National Youth Fitness Survey</a>.</p>
<blockquote class="blockquote">
<p>The NHANES National Youth Fitness Survey (NNYFS) was conducted in 2012 to collect data on physical activity and fitness levels in order to provide an evaluation of the health and fitness of children in the U.S. ages 3 to 15. The NNYFS collected data on physical activity and fitness levels of our youth through interviews and fitness tests.</p>
</blockquote>
<p>In the <code>nnyfs</code> data file (either <code>.csv</code> or <code>.Rds</code>), I’m only providing a modest fraction of the available information. More on the NNYFS (including information I’m not using) is available at https://wwwn.cdc.gov/nchs/nhanes/search/nnyfs12.aspx.</p>
<p>The data elements I’m using fall into four main groups, or components:</p>
<ul>
<li><a href="https://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Demographics">Demographics</a></li>
<li><a href="https://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Dietary">Dietary</a></li>
<li><a href="http://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Examination">Examination</a> and</li>
<li><a href="https://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Questionnaire">Questionnaire</a></li>
</ul>
<p>What I did was merge a few elements from each of the available components of the NHANES National Youth Fitness Survey, reformulated (and in some cases simplified) some variables, and restricted the sample to kids who had completed elements of each of the four components.</p>
</section>
<section id="the-variables-included-in-nnyfs" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="the-variables-included-in-nnyfs"><span class="header-section-number">10.3</span> The Variables included in <code>nnyfs</code></h2>
<p>This section tells you where the data come from, and briefly describe what is collected.</p>
<section id="from-the-nnyfs-demographic-component" class="level3" data-number="10.3.1">
<h3 data-number="10.3.1" class="anchored" data-anchor-id="from-the-nnyfs-demographic-component"><span class="header-section-number">10.3.1</span> From the <a href="https://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Demographics">NNYFS Demographic Component</a></h3>
<p>All of these come from the <code>Y_DEMO</code> file.</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 17%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_DEMO</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>SEQN</code></td>
<td style="text-align: right;"><code>SEQN</code></td>
<td style="text-align: left;">Subject ID, connects all of the files</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>sex</code></td>
<td style="text-align: right;"><code>RIAGENDR</code></td>
<td style="text-align: left;">Really, this is sex, not gender</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>age_child</code></td>
<td style="text-align: right;"><code>RIDAGEYR</code></td>
<td style="text-align: left;">Age in years at screening</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>race_eth</code></td>
<td style="text-align: right;"><code>RIDRETH1</code></td>
<td style="text-align: left;">Race/Hispanic origin (collapsed to 4 levels)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>educ_child</code></td>
<td style="text-align: right;"><code>DMDEDUC3</code></td>
<td style="text-align: left;">Education Level (for children ages 6-15). 0 = Kindergarten, 9 = Ninth grade or higher</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>language</code></td>
<td style="text-align: right;"><code>SIALANG</code></td>
<td style="text-align: left;">Language in which the interview was conducted</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>sampling_wt</code></td>
<td style="text-align: right;"><code>WTMEC</code></td>
<td style="text-align: left;">Full-sample MEC exam weight (for inference)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>income_pov</code></td>
<td style="text-align: right;"><code>INDFMPIR</code></td>
<td style="text-align: left;">Ratio of family income to poverty (ceiling is 5.0)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>age_adult</code></td>
<td style="text-align: right;"><code>DMDHRAGE</code></td>
<td style="text-align: left;">Age of adult who brought child to interview</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>educ_adult</code></td>
<td style="text-align: right;"><code>DMDHREDU</code></td>
<td style="text-align: left;">Education level of adult who brought child</td>
</tr>
</tbody>
</table>
</section>
<section id="from-the-nnyfs-dietary-component" class="level3" data-number="10.3.2">
<h3 data-number="10.3.2" class="anchored" data-anchor-id="from-the-nnyfs-dietary-component"><span class="header-section-number">10.3.2</span> From the <a href="https://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Dietary">NNYFS Dietary Component</a></h3>
<p>From the <code>Y_DR1TOT</code> file, we have a number of variables related to the child’s diet, with the following summaries mostly describing consumption “yesterday” in a dietary recall questionnaire.</p>
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 17%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_DR1TOT</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>respondent</code></td>
<td style="text-align: right;"><code>DR1MNRSP</code></td>
<td style="text-align: left;">who responded to interview (child, Mom, someone else)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>salt_used</code></td>
<td style="text-align: right;"><code>DBQ095Z</code></td>
<td style="text-align: left;">uses salt, lite salt or salt substitute at the table</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>energy</code></td>
<td style="text-align: right;"><code>DR1TKCAL</code></td>
<td style="text-align: left;">energy consumed (kcal)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>protein</code></td>
<td style="text-align: right;"><code>DR1TPROT</code></td>
<td style="text-align: left;">protein consumed (g)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>sugar</code></td>
<td style="text-align: right;"><code>DR1TSUGR</code></td>
<td style="text-align: left;">total sugar consumed (g)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>fat</code></td>
<td style="text-align: right;"><code>DR1TTFAT</code></td>
<td style="text-align: left;">total fat consumed (g)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>diet_yesterday</code></td>
<td style="text-align: right;"><code>DR1_300</code></td>
<td style="text-align: left;">compare food consumed yesterday to usual amount</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>water</code></td>
<td style="text-align: right;"><code>DR1_320Z</code></td>
<td style="text-align: left;">total plain water drank (g)</td>
</tr>
</tbody>
</table>
</section>
<section id="from-the-nnyfs-examination-component" class="level3" data-number="10.3.3">
<h3 data-number="10.3.3" class="anchored" data-anchor-id="from-the-nnyfs-examination-component"><span class="header-section-number">10.3.3</span> From the <a href="https://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Examination">NNYFS Examination Component</a></h3>
<p>From the <code>Y_BMX</code> file of Body Measures:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_BMX</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>height</code></td>
<td style="text-align: right;">BMXHT</td>
<td style="text-align: left;">standing height (cm)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>weight</code></td>
<td style="text-align: right;">BMXWT</td>
<td style="text-align: left;">weight (kg)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>bmi</code></td>
<td style="text-align: right;">BMXBMI</td>
<td style="text-align: left;">body mass index (<span class="math inline">\(kg/m^2\)</span>)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>bmi_cat</code></td>
<td style="text-align: right;">BMDBMIC</td>
<td style="text-align: left;">BMI category (4 levels)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>arm_length</code></td>
<td style="text-align: right;">BMXARML</td>
<td style="text-align: left;">Upper arm length (cm)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>waist</code></td>
<td style="text-align: right;">BMXWAIST</td>
<td style="text-align: left;">Waist circumference (cm)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>arm_circ</code></td>
<td style="text-align: right;">BMXARMC</td>
<td style="text-align: left;">Arm circumference (cm)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>calf_circ</code></td>
<td style="text-align: right;">BMXCALF</td>
<td style="text-align: left;">Maximal calf circumference (cm)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>calf_skinfold</code></td>
<td style="text-align: right;">BMXCALFF</td>
<td style="text-align: left;">Calf skinfold (mm)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>triceps_skinfold</code></td>
<td style="text-align: right;">BMXTRI</td>
<td style="text-align: left;">Triceps skinfold (mm)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>subscapular_skinfold</code></td>
<td style="text-align: right;">BMXSUB</td>
<td style="text-align: left;">Subscapular skinfold (mm)</td>
</tr>
</tbody>
</table>
<p>From the <code>Y_PLX</code> file of Plank test results:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_PLX</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>plank_time</code></td>
<td style="text-align: right;">MPXPLANK</td>
<td style="text-align: left;"># of seconds plank position is held</td>
</tr>
</tbody>
</table>
</section>
<section id="from-the-nnyfs-questionnaire-component" class="level3" data-number="10.3.4">
<h3 data-number="10.3.4" class="anchored" data-anchor-id="from-the-nnyfs-questionnaire-component"><span class="header-section-number">10.3.4</span> From the <a href="https://wwwn.cdc.gov/nchs/nhanes/search/nnyfsdata.aspx?Component=Questionnaire">NNYFS Questionnaire Component</a></h3>
<p>From the <code>Y_PAQ</code> file of Physical Activity questions:</p>
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 17%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_PAQ</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>active_days</code></td>
<td style="text-align: right;">PAQ706</td>
<td style="text-align: left;">Days physically active (<span class="math inline">\(\geq 60\)</span> min.) in past week</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>tv_hours</code></td>
<td style="text-align: right;">PAQ710</td>
<td style="text-align: left;">Average hours watching TV/videos past 30d</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>computer_hours</code></td>
<td style="text-align: right;">PAQ715</td>
<td style="text-align: left;">Average hours on computer past 30d</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>physical_last_week</code></td>
<td style="text-align: right;">PAQ722</td>
<td style="text-align: left;">Any physical activity outside of school past week</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>enjoy_recess</code></td>
<td style="text-align: right;">PAQ750</td>
<td style="text-align: left;">Enjoy participating in PE/recess</td>
</tr>
</tbody>
</table>
<p>From the <code>Y_DBQ</code> file of Diet Behavior and Nutrition questions:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_DBQ</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>meals_out</code></td>
<td style="text-align: right;">DBD895</td>
<td style="text-align: left;"># meals not home-prepared in past 7 days</td>
</tr>
</tbody>
</table>
<p>From the <code>Y_HIQ</code> file of Health Insurance questions:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_HIQ</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>insured</code></td>
<td style="text-align: right;">HIQ011</td>
<td style="text-align: left;">Covered by Health Insurance?</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>insurance</code></td>
<td style="text-align: right;">HIQ031</td>
<td style="text-align: left;">Type of Health Insurance coverage</td>
</tr>
</tbody>
</table>
<p>From the <code>Y_HUQ</code> file of Access to Care questions:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_HUQ</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>phys_health</code></td>
<td style="text-align: right;">HUQ010</td>
<td style="text-align: left;">General health condition (Excellent - Poor)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>access_to_care</code></td>
<td style="text-align: right;">HUQ030</td>
<td style="text-align: left;">Routine place to get care?</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>care_source</code></td>
<td style="text-align: right;">HUQ040</td>
<td style="text-align: left;">Type of place most often goes to for care</td>
</tr>
</tbody>
</table>
<p>From the <code>Y_MCQ</code> file of Medical Conditions questions:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_MCQ</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>asthma_ever</code></td>
<td style="text-align: right;">MCQ010</td>
<td style="text-align: left;">Ever told you have asthma?</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>asthma_now</code></td>
<td style="text-align: right;">MCQ035</td>
<td style="text-align: left;">Still have asthma?</td>
</tr>
</tbody>
</table>
<p>From the <code>Y_RXQ_RX</code> file of Prescription Medication questions:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">In <code>nnyfs</code></th>
<th style="text-align: right;">In <code>Y_RXQ_RX</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>med_use</code></td>
<td style="text-align: right;">RXDUSE</td>
<td style="text-align: left;">Taken prescription medication in last month?</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>med_count</code></td>
<td style="text-align: right;">RXDCOUNT</td>
<td style="text-align: left;"># of prescription meds taken in past month</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="looking-over-a-few-variables" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="looking-over-a-few-variables"><span class="header-section-number">10.4</span> Looking over A Few Variables</h2>
<p>Now, I’ll take a look at the <code>nnyfs</code> data, which I’ve made available in a comma-separated version (<code>nnyfs.csv</code>), if you prefer, as well as in an R data set (<code>nnyfs.Rds</code>) which loads a bit faster. After loading the file, let’s get a handle on its size and contents. In my R Project for these notes, the data are contained in a separate <code>data</code> subdirectory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/nnyfs.Rds"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="do">## size of the tibble</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(nnyfs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1518   45</code></pre>
</div>
</div>
<p>There are 1518 rows (subjects) and 45 columns (variables), by which I mean that there are 1518 kids in the <code>nnyfs</code> data frame, and we have 45 pieces of information on each subject. So, what do we have, exactly?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="co"># this is a tibble, has some nice features in a print-out like this</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,518 × 45
    SEQN sex    age_ch…¹ race_…² educ_…³ langu…⁴ sampl…⁵ incom…⁶ age_a…⁷ educ_…⁸
   &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;  
 1 71917 Female       15 3_Blac…       9 English  28299.    0.21      46 2_9-11…
 2 71918 Female        8 3_Blac…       2 English  15127.    5         46 3_High…
 3 71919 Female       14 2_Whit…       8 English  29977.    5         42 5_Coll…
 4 71920 Female       15 2_Whit…       8 English  80652.    0.87      53 3_High…
 5 71921 Male          3 2_Whit…      NA English  55592.    4.34      31 3_High…
 6 71922 Male         12 1_Hisp…       6 English  27365.    5         42 4_Some…
 7 71923 Male         12 2_Whit…       5 English  86673.    5         39 2_9-11…
 8 71924 Female        8 4_Othe…       2 English  39549.    2.74      31 3_High…
 9 71925 Male          7 1_Hisp…       0 English  42333.    0.46      45 2_9-11…
10 71926 Male          8 3_Blac…       2 English  15307.    1.57      56 3_High…
# … with 1,508 more rows, 35 more variables: respondent &lt;fct&gt;, salt_used &lt;fct&gt;,
#   energy &lt;dbl&gt;, protein &lt;dbl&gt;, sugar &lt;dbl&gt;, fat &lt;dbl&gt;, diet_yesterday &lt;fct&gt;,
#   water &lt;dbl&gt;, plank_time &lt;dbl&gt;, height &lt;dbl&gt;, weight &lt;dbl&gt;, bmi &lt;dbl&gt;,
#   bmi_cat &lt;fct&gt;, arm_length &lt;dbl&gt;, waist &lt;dbl&gt;, arm_circ &lt;dbl&gt;,
#   calf_circ &lt;dbl&gt;, calf_skinfold &lt;dbl&gt;, triceps_skinfold &lt;dbl&gt;,
#   subscapular_skinfold &lt;dbl&gt;, active_days &lt;dbl&gt;, tv_hours &lt;dbl&gt;,
#   computer_hours &lt;dbl&gt;, physical_last_week &lt;fct&gt;, enjoy_recess &lt;fct&gt;, …
# ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</code></pre>
</div>
</div>
<p>Tibbles are a modern reimagining of the main way in which people have stored data in R, called a data frame. Tibbles were developed to keep what time has proven to be effective, and throwing out what is not. We can learn something about the structure of the tibble from such functions as <code>str</code> or <code>glimpse</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(nnyfs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,518 × 45] (S3: tbl_df/tbl/data.frame)
 $ SEQN                : num [1:1518] 71917 71918 71919 71920 71921 ...
 $ sex                 : Factor w/ 2 levels "Female","Male": 1 1 1 1 2 2 2 1 2 2 ...
 $ age_child           : num [1:1518] 15 8 14 15 3 12 12 8 7 8 ...
 $ race_eth            : Factor w/ 4 levels "1_Hispanic","2_White Non-Hispanic",..: 3 3 2 2 2 1 2 4 1 3 ...
 $ educ_child          : num [1:1518] 9 2 8 8 NA 6 5 2 0 2 ...
 $ language            : Factor w/ 2 levels "English","Spanish": 1 1 1 1 1 1 1 1 1 1 ...
 $ sampling_wt         : num [1:1518] 28299 15127 29977 80652 55592 ...
 $ income_pov          : num [1:1518] 0.21 5 5 0.87 4.34 5 5 2.74 0.46 1.57 ...
 $ age_adult           : num [1:1518] 46 46 42 53 31 42 39 31 45 56 ...
 $ educ_adult          : Factor w/ 5 levels "1_Less than 9th Grade",..: 2 3 5 3 3 4 2 3 2 3 ...
 $ respondent          : Factor w/ 3 levels "Child","Mom",..: 1 2 1 1 2 1 1 1 2 1 ...
 $ salt_used           : Factor w/ 2 levels "No","Yes": 2 2 2 2 1 2 2 2 1 2 ...
 $ energy              : num [1:1518] 2844 1725 2304 1114 1655 ...
 $ protein             : num [1:1518] 169.1 55.2 199.3 14 50.6 ...
 $ sugar               : num [1:1518] 128.2 118.7 81.4 119.2 90.3 ...
 $ fat                 : num [1:1518] 127.9 63.7 86.1 36 53.3 ...
 $ diet_yesterday      : Factor w/ 3 levels "1_Much more than usual",..: 2 2 2 2 2 2 1 2 2 3 ...
 $ water               : num [1:1518] 607 178 503 859 148 ...
 $ plank_time          : num [1:1518] NA 45 121 45 11 107 127 44 184 58 ...
 $ height              : num [1:1518] NA 131.6 172 167.1 90.2 ...
 $ weight              : num [1:1518] NA 38.6 58.7 92.5 12.4 66.4 56.7 22.2 20.9 28.3 ...
 $ bmi                 : num [1:1518] NA 22.3 19.8 33.1 15.2 25.9 22.5 14.4 15.9 17 ...
 $ bmi_cat             : Factor w/ 4 levels "1_Underweight",..: NA 4 2 4 2 4 3 2 2 2 ...
 $ arm_length          : num [1:1518] NA 27.7 38.4 35.9 18.3 34.2 33 26.5 24.2 26 ...
 $ waist               : num [1:1518] NA 71.9 79.4 96.4 46.8 90 72.3 56.1 54.5 59.7 ...
 $ arm_circ            : num [1:1518] NA 25.4 26 37.9 15.1 29.5 27.9 17.6 17.7 19.9 ...
 $ calf_circ           : num [1:1518] NA 32.3 35.3 46.8 19.4 36.9 36.8 24 24.3 27.3 ...
 $ calf_skinfold       : num [1:1518] NA 22 18.4 NA 8.4 22 18.3 7 7.2 8.2 ...
 $ triceps_skinfold    : num [1:1518] NA 19.9 15 20.6 8.6 22.8 20.5 12.9 6.9 8.8 ...
 $ subscapular_skinfold: num [1:1518] NA 17.4 9.8 22.8 5.7 24.4 12.6 6.8 4.8 6.1 ...
 $ active_days         : num [1:1518] 3 5 3 3 7 2 5 3 7 7 ...
 $ tv_hours            : num [1:1518] 2 2 1 3 2 3 0 4 2 2 ...
 $ computer_hours      : num [1:1518] 1 2 3 3 0 1 0 3 1 1 ...
 $ physical_last_week  : Factor w/ 2 levels "No","Yes": 1 1 2 2 2 2 2 2 2 2 ...
 $ enjoy_recess        : Factor w/ 5 levels "1_Strongly Agree",..: 1 1 3 2 NA 2 2 NA 1 1 ...
 $ meals_out           : num [1:1518] 0 2 3 2 1 1 2 1 0 2 ...
 $ insured             : Factor w/ 2 levels "Has Insurance",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ phys_health         : Factor w/ 5 levels "1_Excellent",..: 1 3 1 3 1 1 3 1 2 1 ...
 $ access_to_care      : Factor w/ 2 levels "Has Usual Care Source",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ care_source         : Factor w/ 6 levels "Clinic or Health Center",..: 1 2 2 2 2 2 2 2 2 2 ...
 $ asthma_ever         : Factor w/ 2 levels "History of Asthma",..: 2 1 2 1 2 2 2 2 2 2 ...
 $ asthma_now          : Factor w/ 2 levels "Asthma Now","No Asthma Now": 2 1 2 1 2 2 2 2 2 2 ...
 $ med_use             : Factor w/ 2 levels "Had Medication",..: 2 1 2 1 2 2 2 2 2 2 ...
 $ med_count           : num [1:1518] 0 1 0 2 0 0 0 0 0 0 ...
 $ insurance           : Factor w/ 10 levels "Medicaid","Medicare",..: 8 8 5 8 5 5 5 5 8 1 ...</code></pre>
</div>
</div>
<p>There are a lot of variables here. Let’s run through the first few in a little detail.</p>
<section id="seqn" class="level3" data-number="10.4.1">
<h3 data-number="10.4.1" class="anchored" data-anchor-id="seqn"><span class="header-section-number">10.4.1</span> <code>SEQN</code></h3>
<p>The first variable, <code>SEQN</code> is just a (numerical) identifying code attributable to a given subject of the survey. This is <em>nominal</em> data, which will be of little interest down the line. On some occasions, as in this case, the ID numbers are sequential, in the sense that subject 71919 was included in the data base after subject 71918, but this fact isn’t particularly interesting here, because the protocol remained unchanged throughout the study.</p>
</section>
<section id="sex" class="level3" data-number="10.4.2">
<h3 data-number="10.4.2" class="anchored" data-anchor-id="sex"><span class="header-section-number">10.4.2</span> <code>sex</code></h3>
<p>The second variable, <code>sex</code>, is listed as a factor variable (R uses <strong>factor</strong> and <strong>character</strong> to refer to categorical, especially non-numeric information). Here, as we can see below, we have two levels, <em>Female</em> and <em>Male</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(sex) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    sex    n percent
 Female  760   50.1%
   Male  758   49.9%
  Total 1518  100.0%</code></pre>
</div>
</div>
</section>
<section id="age_child" class="level3" data-number="10.4.3">
<h3 data-number="10.4.3" class="anchored" data-anchor-id="age_child"><span class="header-section-number">10.4.3</span> <code>age_child</code></h3>
<p>The third variable, <code>age_child</code>, is the age of the child at the time of their screening to be in the study, measured in years. Note that age is a continuous concept, but the measure used here (number of full years alive) is a common discrete approach to measurement. Age, of course, has a meaningful zero point, so this can be thought of as a ratio variable; a child who is 6 is half as old as one who is 12. We can tabulate the observed values, since there are only a dozen or so.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">tabyl</span>(age_child) <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> age_child   n percent
         3 110    7.2%
         4 112    7.4%
         5 114    7.5%
         6 129    8.5%
         7 123    8.1%
         8 112    7.4%
         9  99    6.5%
        10 124    8.2%
        11 111    7.3%
        12 137    9.0%
        13 119    7.8%
        14 130    8.6%
        15  98    6.5%</code></pre>
</div>
</div>
<p>At the time of initial screening, these children should have been between 3 and 15 years of age, so things look reasonable. Since this is a meaningful quantitative variable, we may be interested in a more descriptive summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">select</span>(age_child) <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   age_child     
 Min.   : 3.000  
 1st Qu.: 6.000  
 Median : 9.000  
 Mean   : 9.033  
 3rd Qu.:12.000  
 Max.   :15.000  </code></pre>
</div>
</div>
<p>These six numbers provide a nice, if incomplete, look at the ages.</p>
<ul>
<li><code>Min.</code> = the minimum, or youngest age at the examination was 3 years old.</li>
<li><code>1st Qu.</code> = the first quartile (25th percentile) of the ages was 6. This means that 25 percent of the subjects were age 6 or less.</li>
<li><code>Median</code> = the second quartile (50th percentile) of the ages was 9. This is often used to describe the center of the data. Half of the subjects were age 9 or less.</li>
<li><code>3rd Qu.</code> = the third quartile (75th percentile) of the ages was 12</li>
<li><code>Max.</code> = the maximum, or oldest age at the examination was 15 years.</li>
</ul>
<p>We could get the standard deviation and a count of missing and non-missing observations with <code>favstats</code> from the <code>mosaic</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(<span class="sc">~</span> age_child, <span class="at">data =</span> nnyfs) <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'mosaic':
  method                           from   
  fortify.SpatialPolygonsDataFrame ggplot2</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">Q1</th>
<th style="text-align: right;">median</th>
<th style="text-align: right;">Q3</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">3.7</td>
<td style="text-align: right;">1518</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="race_eth" class="level3" data-number="10.4.4">
<h3 data-number="10.4.4" class="anchored" data-anchor-id="race_eth"><span class="header-section-number">10.4.4</span> <code>race_eth</code></h3>
<p>The fourth variable in the data set is <code>race_eth</code>, which is a multi-categorical variable describing the child’s race and ethnicity.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">tabyl</span>(race_eth) <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">race_eth</th>
<th style="text-align: right;">n</th>
<th style="text-align: left;">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1_Hispanic</td>
<td style="text-align: right;">450</td>
<td style="text-align: left;">29.6%</td>
</tr>
<tr class="even">
<td style="text-align: left;">2_White Non-Hispanic</td>
<td style="text-align: right;">610</td>
<td style="text-align: left;">40.2%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3_Black Non-Hispanic</td>
<td style="text-align: right;">338</td>
<td style="text-align: left;">22.3%</td>
</tr>
<tr class="even">
<td style="text-align: left;">4_Other Race/Ethnicity</td>
<td style="text-align: right;">120</td>
<td style="text-align: left;">7.9%</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>And now, we get the idea of looking at whether our numerical summaries of the children’s ages varies by their race/ethnicity…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(age_child <span class="sc">~</span> race_eth, <span class="at">data =</span> nnyfs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                race_eth min   Q1 median Q3 max     mean       sd   n missing
1             1_Hispanic   3 5.25    9.0 12  15 8.793333 3.733846 450       0
2   2_White Non-Hispanic   3 6.00    9.0 12  15 9.137705 3.804421 610       0
3   3_Black Non-Hispanic   3 6.00    9.0 12  15 9.038462 3.576423 338       0
4 4_Other Race/Ethnicity   3 7.00    9.5 12  15 9.383333 3.427970 120       0</code></pre>
</div>
</div>
</section>
<section id="income_pov" class="level3" data-number="10.4.5">
<h3 data-number="10.4.5" class="anchored" data-anchor-id="income_pov"><span class="header-section-number">10.4.5</span> <code>income_pov</code></h3>
<p>Skipping down a bit, let’s look at the family income as a multiple of the poverty level. Here’s the summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">select</span>(income_pov) <span class="sc">|&gt;</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   income_pov   
 Min.   :0.000  
 1st Qu.:0.870  
 Median :1.740  
 Mean   :2.242  
 3rd Qu.:3.520  
 Max.   :5.000  
 NA's   :89     </code></pre>
</div>
</div>
<p>We see there is some missing data here. Let’s ignore that for the moment and concentrate on interpreting the results for the children with actual data. We should start with a picture.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> income_pov)) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">col =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 89 rows containing non-finite values (stat_bin).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_inc2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The histogram shows us that the values are truncated at 5, so that children whose actual family income is above 5 times the poverty line are listed as 5. We also see a message reminding us that some of the data are missing for this variable.</p>
<p>Is there a relationship between <code>income_pov</code> and <code>race_eth</code> in these data?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(income_pov <span class="sc">~</span> race_eth, <span class="at">data =</span> nnyfs) <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 34%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 10%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">race_eth</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">Q1</th>
<th style="text-align: right;">median</th>
<th style="text-align: right;">Q3</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1_Hispanic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.6</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">1.1</td>
<td style="text-align: right;">409</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">2_White Non-Hispanic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: right;">1.6</td>
<td style="text-align: right;">588</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3_Black Non-Hispanic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.8</td>
<td style="text-align: right;">1.6</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">328</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">4_Other Race/Ethnicity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.2</td>
<td style="text-align: right;">2.7</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">104</td>
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This deserves a picture. Let’s try a boxplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> race_eth, <span class="at">y =</span> income_pov)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 89 rows containing non-finite values (stat_boxplot).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_inc4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="bmi" class="level3" data-number="10.4.6">
<h3 data-number="10.4.6" class="anchored" data-anchor-id="bmi"><span class="header-section-number">10.4.6</span> <code>bmi</code></h3>
<p>Moving into the body measurement data, <code>bmi</code> is the body-mass index of the child. The BMI is a person’s weight in kilograms divided by his or her height in meters squared. Symbolically, BMI = weight in kg / (height in m)<sup>2</sup>. This is a continuous concept, measured to as many decimal places as you like, and it has a meaningful zero point, so it’s a ratio variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">select</span>(bmi) <span class="sc">|&gt;</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      bmi       
 Min.   :11.90  
 1st Qu.:15.90  
 Median :18.10  
 Mean   :19.63  
 3rd Qu.:21.90  
 Max.   :48.30  
 NA's   :4      </code></pre>
</div>
</div>
<p>Why would a table of these BMI values not be a great idea, for these data? A hint is that R represents this variable as <code>num</code> or numeric in its depiction of the data structure, and this implies that R has some decimal values stored. Here, I’ll use the <code>head()</code> function and the <code>tail()</code> function to show the first few and the last few values of what would prove to be a very long table of <code>bmi</code> values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">tabyl</span>(bmi) <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  bmi n percent valid_percent
 11.9 1    0.1%          0.1%
 12.6 1    0.1%          0.1%
 12.7 1    0.1%          0.1%
 12.9 1    0.1%          0.1%
 13.0 2    0.1%          0.1%
 13.1 1    0.1%          0.1%</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">tabyl</span>(bmi) <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  bmi n percent valid_percent
 42.8 1    0.1%          0.1%
 43.0 1    0.1%          0.1%
 46.9 1    0.1%          0.1%
 48.2 1    0.1%          0.1%
 48.3 1    0.1%          0.1%
   NA 4    0.3%             -</code></pre>
</div>
</div>
</section>
<section id="bmi_cat" class="level3" data-number="10.4.7">
<h3 data-number="10.4.7" class="anchored" data-anchor-id="bmi_cat"><span class="header-section-number">10.4.7</span> <code>bmi_cat</code></h3>
<p>Next I’ll look at the <code>bmi_cat</code> information. This is a four-category ordinal variable, which divides the sample according to BMI into four groups. The BMI categories use sex-specific 2000 BMI-for-age (in months) growth charts prepared by the Centers for Disease Control for the US. We can get the breakdown from a table of the variable’s values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">tabyl</span>(bmi_cat) <span class="sc">|&gt;</span> <span class="fu">adorn_pct_formatting</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       bmi_cat   n percent valid_percent
 1_Underweight  41    2.7%          2.7%
      2_Normal 920   60.6%         60.8%
  3_Overweight 258   17.0%         17.0%
       4_Obese 295   19.4%         19.5%
          &lt;NA&gt;   4    0.3%             -</code></pre>
</div>
</div>
<p>In terms of percentiles by age and sex from the growth charts, the meanings of the categories are:</p>
<ul>
<li>Underweight (BMI &lt; 5th percentile)</li>
<li>Normal weight (BMI 5th to &lt; 85th percentile)</li>
<li>Overweight (BMI 85th to &lt; 95th percentile)</li>
<li>Obese (BMI <span class="math inline">\(\geq\)</span> 95th percentile)</li>
</ul>
<p>Note how I’ve used labels in the <code>bmi_cat</code> variable that include a number at the start so that the table results are sorted in a rational way. R sorts tables alphabetically, in general. We’ll use the <code>forcats</code> package to work with categorical variables that we store as <em>factors</em> eventually, but for now, we’ll keep things relatively simple.</p>
<p>Note that the <code>bmi_cat</code> data don’t completely separate out the raw <code>bmi</code> data, because the calculation of percentiles requires different tables for each combination of <code>age</code> and <code>sex</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(bmi <span class="sc">~</span> bmi_cat, <span class="at">data =</span> nnyfs) <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 22%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">bmi_cat</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">Q1</th>
<th style="text-align: right;">median</th>
<th style="text-align: right;">Q3</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1_Underweight</td>
<td style="text-align: right;">11.9</td>
<td style="text-align: right;">13.4</td>
<td style="text-align: right;">13.7</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">16.5</td>
<td style="text-align: right;">14.1</td>
<td style="text-align: right;">1.1</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">2_Normal</td>
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">15.4</td>
<td style="text-align: right;">16.5</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">24.0</td>
<td style="text-align: right;">17.2</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">920</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3_Overweight</td>
<td style="text-align: right;">16.9</td>
<td style="text-align: right;">18.3</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">23.4</td>
<td style="text-align: right;">27.9</td>
<td style="text-align: right;">21.2</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">4_Obese</td>
<td style="text-align: right;">17.9</td>
<td style="text-align: right;">22.3</td>
<td style="text-align: right;">26.2</td>
<td style="text-align: right;">30.2</td>
<td style="text-align: right;">48.3</td>
<td style="text-align: right;">26.7</td>
<td style="text-align: right;">5.7</td>
<td style="text-align: right;">295</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="waist" class="level3" data-number="10.4.8">
<h3 data-number="10.4.8" class="anchored" data-anchor-id="waist"><span class="header-section-number">10.4.8</span> <code>waist</code></h3>
<p>Let’s also look briefly at <code>waist</code>, which is the circumference of the child’s waist, in centimeters. Again, this is a numeric variable, so perhaps we’ll stick to the simple summary, rather than obtaining a table of observed values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(<span class="sc">~</span> waist, <span class="at">data =</span> nnyfs) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  min   Q1 median   Q3   max     mean       sd    n missing
 42.5 55.6   64.8 76.6 144.7 67.70536 15.19809 1512       6</code></pre>
</div>
</div>
<p>Here’s a histogram of the waist circumference data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> waist)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">25</span>, <span class="at">fill =</span> <span class="st">"tomato"</span>, <span class="at">color =</span> <span class="st">"cyan"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 6 rows containing non-finite values (stat_bin).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_waist2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="triceps_skinfold" class="level3" data-number="10.4.9">
<h3 data-number="10.4.9" class="anchored" data-anchor-id="triceps_skinfold"><span class="header-section-number">10.4.9</span> <code>triceps_skinfold</code></h3>
<p>The last variable I’ll look at for now is <code>triceps_skinfold</code>, which is measured in millimeters. This is one of several common locations used for the assessment of body fat using skinfold calipers, and is a frequent part of growth assessments in children. Again, this is a numeric variable according to R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(<span class="sc">~</span> triceps_skinfold, <span class="at">data =</span> nnyfs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> min  Q1 median Q3  max     mean       sd    n missing
   4 9.1   12.4 18 38.8 14.35725 6.758825 1497      21</code></pre>
</div>
</div>
<p>And here’s a histogram of the triceps skinfold data, with the fill and color flipped from what we saw in the plot of the waist circumference data a moment ago.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> triceps_skinfold)) <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">25</span>, <span class="at">fill =</span> <span class="st">"cyan"</span>, <span class="at">color =</span> <span class="st">"tomato"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (stat_bin).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_tri2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>OK. We’ve seen a few variables, and we’ll move on now to look more seriously at the data.</p>
</section>
</section>
<section id="additional-numeric-summaries" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="additional-numeric-summaries"><span class="header-section-number">10.5</span> Additional Numeric Summaries</h2>
<section id="the-five-number-summary-quantiles-and-iqr" class="level3" data-number="10.5.1">
<h3 data-number="10.5.1" class="anchored" data-anchor-id="the-five-number-summary-quantiles-and-iqr"><span class="header-section-number">10.5.1</span> The Five Number Summary, Quantiles and IQR</h3>
<p>The <strong>five number summary</strong> is most famous when used to form a box plot - it’s the minimum, 25th percentile, median, 75th percentile and maximum. For numerical and integer variables, the <code>summary</code> function produces the five number summary, plus the mean, and a count of any missing values (NA’s).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(waist, energy, sugar) <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     waist            energy         sugar       
 Min.   : 42.50   Min.   : 257   Min.   :  1.00  
 1st Qu.: 55.60   1st Qu.:1368   1st Qu.: 82.66  
 Median : 64.80   Median :1794   Median :116.92  
 Mean   : 67.71   Mean   :1877   Mean   :124.32  
 3rd Qu.: 76.60   3rd Qu.:2306   3rd Qu.:157.05  
 Max.   :144.70   Max.   :5265   Max.   :405.49  
 NA's   :6                                       </code></pre>
</div>
</div>
<p>As an alternative, we can use the <code>$</code> notation to indicate the variable we wish to study inside a data set, and we can use the <code>fivenum</code> function to get the five numbers used in developing a box plot. We’ll focus for a little while on the number of kilocalories consumed by each child, according to the dietary recall questionnaire. That’s the <code>energy</code> variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fivenum</span>(nnyfs<span class="sc">$</span>energy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  257.0 1367.0 1794.5 2306.0 5265.0</code></pre>
</div>
</div>
<ul>
<li>As mentioned in @ref(rangeandiqr), the <strong>inter-quartile range</strong>, or IQR, is sometimes used as a competitor for the standard deviation. It’s the difference between the 75th percentile and the 25th percentile. The 25th percentile, median, and 75th percentile are referred to as the quartiles of the data set, because, together, they split the data into quarters.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(nnyfs<span class="sc">$</span>energy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 938.5</code></pre>
</div>
</div>
<p>We can obtain <strong>quantiles</strong> (percentiles) as we like - here, I’m asking for the 1st and 99th:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(nnyfs<span class="sc">$</span>energy, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.01</span>, <span class="fl">0.99</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1%     99% 
 566.85 4051.75 </code></pre>
</div>
</div>
</section>
</section>
<section id="additional-summaries-from-favstats" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="additional-summaries-from-favstats"><span class="header-section-number">10.6</span> Additional Summaries from <code>favstats</code></h2>
<p>If we’re focusing on a single variable, the <code>favstats</code> function in the <code>mosaic</code> package can be very helpful. Rather than calling up the entire <code>mosaic</code> library here, I’ll just specify the function within the library.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(<span class="sc">~</span> energy, <span class="at">data =</span> nnyfs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> min     Q1 median   Q3  max     mean       sd    n missing
 257 1367.5 1794.5 2306 5265 1877.157 722.3537 1518       0</code></pre>
</div>
</div>
<p>This adds three useful results to the base summary - the standard deviation, the sample size and the number of missing observations.</p>
</section>
<section id="the-histogram" class="level2" data-number="10.7">
<h2 data-number="10.7" class="anchored" data-anchor-id="the-histogram"><span class="header-section-number">10.7</span> The Histogram</h2>
<p>Obtaining a basic <strong>histogram</strong> of, for example, the energy (kilocalories consumed) in the <code>nnyfs</code> data is pretty straightforward.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> energy)) <span class="sc">+</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">100</span>, <span class="at">col =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_hist1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="freedman-diaconis-rule-to-select-bin-width" class="level3" data-number="10.7.1">
<h3 data-number="10.7.1" class="anchored" data-anchor-id="freedman-diaconis-rule-to-select-bin-width"><span class="header-section-number">10.7.1</span> Freedman-Diaconis Rule to select bin width</h3>
<p>If we like, we can suggest a particular number of cells for the histogram, instead of accepting the defaults. In this case, we have <span class="math inline">\(n\)</span> = 1518 observations. The <strong>Freedman-Diaconis rule</strong> can be helpful here. That rule suggests that we set the bin-width to</p>
<p><span class="math display">\[
h = \frac{2*IQR}{n^{1/3}}
\]</span></p>
<p>so that the number of bins is equal to the range of the data set (maximum - minimum) divided by <span class="math inline">\(h\)</span>.</p>
<p>For the <code>energy</code> data in the <code>nnyfs</code> tibble, we have</p>
<ul>
<li>IQR of 938.5, <span class="math inline">\(n\)</span> = 1518 and range = 5008</li>
<li>Thus, by the Freedman-Diaconis rule, the optimal binwidth <span class="math inline">\(h\)</span> is 163.3203676, or, realistically, 163.</li>
<li>And so the number of bins would be 30.6636586, or, realistically 31.</li>
</ul>
<p>Here, we’ll draw the graph again, using the Freedman-Diaconis rule to identify the number of bins, and also play around a bit with the fill and color of the bars.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>bw <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">IQR</span>(nnyfs<span class="sc">$</span>energy) <span class="sc">/</span> <span class="fu">length</span>(nnyfs<span class="sc">$</span>energy)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> energy)) <span class="sc">+</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span>bw, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">fill =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_hist2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is a nice start, but it is by no means a finished graph.</p>
<p>Let’s improve the axis labels, add a title, and fill in the bars with a distinctive blue and use a black outline around each bar. I’ll just use 25 bars, because I like how that looks in this case, and optimizing the number of bins is rarely important.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> energy)) <span class="sc">+</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">25</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"dodgerblue"</span>) <span class="sc">+</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histogram of Body-Mass Index Results in the nnyfs data"</span>,</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Energy Consumed (kcal)"</span>, <span class="at">y =</span> <span class="st">"# of Subjects"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_hist3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="a-note-on-colors" class="level3" data-number="10.7.2">
<h3 data-number="10.7.2" class="anchored" data-anchor-id="a-note-on-colors"><span class="header-section-number">10.7.2</span> A Note on Colors</h3>
<p>The simplest way to specify a color is with its name, enclosed in parentheses. My favorite list of R colors is http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf. In a pinch, you can usually find it by googling <strong>Colors in R</strong>. You can also type <code>colors()</code> in the R console to obtain a list of the names of the same 657 colors.</p>
<p>When using colors to make comparisons, you may be interested in using a scale that has some nice properties. The <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">viridis package vignette</a> describes four color scales (viridis, magma, plasma and inferno) that are designed to be colorful, robust to colorblindness and gray scale printing, and perceptually uniform, which means (as the package authors describe it) that values close to each other have similar-appearing colors and values far away from each other have more different-appearing colors, consistently across the range of values. We can apply these colors with special functions within <code>ggplot</code>.</p>
<p>Here’s a comparison of several histograms, looking at <code>energy</code> consumed as a function of whether yesterday was typical in terms of food consumption.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> energy, <span class="at">fill =</span> diet_yesterday)) <span class="sc">+</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>, <span class="at">col =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> diet_yesterday)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_hist4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We don’t really need the legend here, and perhaps we should restrict the plot to participants who responded to the <code>diet_yesterday</code> question, and put in a title and better axis labels?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(energy), <span class="sc">!</span><span class="fu">is.na</span>(diet_yesterday)) <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> ., <span class="fu">aes</span>(<span class="at">x =</span> energy, <span class="at">fill =</span> diet_yesterday)) <span class="sc">+</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>, <span class="at">col =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> diet_yesterday) <span class="sc">+</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Energy consumed, in kcal"</span>,</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Energy Consumption and How Typical Was Yesterday's Eating"</span>,</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"NHANES National Youth Fitness Survey, no survey weighting"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_hist5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Note the use of the <code>%&gt;%</code> pipe here. I need to write more about this.</p>
</section>
</section>
<section id="the-frequency-polygon" class="level2" data-number="10.8">
<h2 data-number="10.8" class="anchored" data-anchor-id="the-frequency-polygon"><span class="header-section-number">10.8</span> The Frequency Polygon</h2>
<p>As we’ve seen, we can also plot the distribution of a single continuous variable using the <code>freqpoly</code> geom. We can also add a <em>rug plot</em>, which places a small vertical line on the horizontal axis everywhere where an observation appears in the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> energy)) <span class="sc">+</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">150</span>, <span class="at">color =</span> <span class="st">"dodgerblue"</span>) <span class="sc">+</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rug</span>(<span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Frequency Polygon of nnyfs Energy data"</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Energy (kcal)"</span>, <span class="at">y =</span> <span class="st">"# of Patients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_freqpoly-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plotting-the-probability-density-function" class="level2" data-number="10.9">
<h2 data-number="10.9" class="anchored" data-anchor-id="plotting-the-probability-density-function"><span class="header-section-number">10.9</span> Plotting the Probability Density Function</h2>
<p>We can also produce a density function, which has the effect of smoothing out the bumps in a histogram or frequency polygon, while also changing what is plotted on the y-axis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> energy)) <span class="sc">+</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">kernel =</span> <span class="st">"gaussian"</span>, <span class="at">color =</span> <span class="st">"dodgerblue"</span>) <span class="sc">+</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Density of nnyfs Energy data"</span>,</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Energy (kcal)"</span>, <span class="at">y =</span> <span class="st">"Probability Density function"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_density-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>So, what’s a density function?</p>
<ul>
<li>A probability density function is a function of a continuous variable, x, that represents the probability of x falling within a given range. Specifically, the integral over the interval (a,b) of the density function gives the probability that the value of x is within (a,b).</li>
<li>If you’re interested in exploring more on the notion of density functions for continuous (and discrete) random variables, some nice elementary material is available at <a href="https://www.khanacademy.org/math/statistics-probability/random-variables-stats-library/discrete-and-continuous-random-variables/v/probability-density-functions">Khan Academy</a>.</li>
</ul>
</section>
<section id="the-boxplot" class="level2" data-number="10.10">
<h2 data-number="10.10" class="anchored" data-anchor-id="the-boxplot"><span class="header-section-number">10.10</span> The Boxplot</h2>
<p>Sometimes, it’s helpful to picture the five-number summary of the data in such a way as to get a general sense of the distribution. One approach is a <strong>boxplot</strong>, sometimes called a box-and-whisker plot.</p>
<section id="drawing-a-boxplot-for-one-variable-in-ggplot2" class="level3" data-number="10.10.1">
<h3 data-number="10.10.1" class="anchored" data-anchor-id="drawing-a-boxplot-for-one-variable-in-ggplot2"><span class="header-section-number">10.10.1</span> Drawing a Boxplot for One Variable in <code>ggplot2</code></h3>
<p>The <code>ggplot2</code> library easily handles comparison boxplots for multiple distributions, as we’ll see in a moment. However, building a boxplot for a single distribution requires a little trickiness.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> energy)) <span class="sc">+</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"deepskyblue"</span>) <span class="sc">+</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of Energy for kids in the NNYFS"</span>,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Energy (kcal)"</span>,</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_box1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="about-the-boxplot" class="level3" data-number="10.10.2">
<h3 data-number="10.10.2" class="anchored" data-anchor-id="about-the-boxplot"><span class="header-section-number">10.10.2</span> About the Boxplot</h3>
<p>The boxplot is another John Tukey invention.</p>
<ul>
<li>R draws the box (here in yellow) so that its edges of the box fall at the 25<sup>th</sup> and 75<sup>th</sup> percentiles of the data, and the thick line inside the box falls at the median (50<sup>th</sup> percentile).</li>
<li>The whiskers then extend out to the largest and smallest values that are not classified by the plot as candidate <em>outliers</em>.</li>
<li>An outlier is an unusual point, far from the center of a distribution.</li>
<li>Note that I’ve used the <code>horizontal</code> option to show this boxplot in this direction. Most comparison boxplots, as we’ll see below, are oriented vertically.</li>
</ul>
<p>The boxplot’s <strong>whiskers</strong> that are drawn from the first and third quartiles (i.e.&nbsp;the 25<sup>th</sup> and 75<sup>th</sup> percentiles) out to the most extreme points in the data that do not meet the standard of ``candidate outliers.’’ An outlier is simply a point that is far away from the center of the data - which may be due to any number of reasons, and generally indicates a need for further investigation.</p>
<p>Most software, including R, uses a standard proposed by Tukey which describes a ``candidate outlier’’ as any point above the <strong><em>upper fence</em></strong> or below the <strong><em>lower fence</em></strong>. The definitions of the fences are based on the inter-quartile range (IQR).</p>
<p>If IQR = 75th percentile - 25th percentile, then the upper fence is 75th percentile + 1.5 IQR, and the lower fence is 25th percentile - 1.5 IQR.</p>
<p>So for these <code>energy</code> data,</p>
<ul>
<li>the upper fence is located at 2306 + 1.5(938.5) = 3713.75</li>
<li>the lower fence is located at 1367 - 1.5(938.5) = -40.75</li>
</ul>
<p>In this case, we see no points identified as outliers in the low part of the distribution, but quite a few identified that way on the high side. This tends to identify about 5% of the data as a candidate outlier, <em>if</em> the data follow a Normal distribution.</p>
<ul>
<li>This plot is indicating clearly that there is some asymmetry (skew) in the data, specifically right skew.</li>
<li>The standard R uses is to indicate as outliers any points that are more than 1.5 inter-quartile ranges away from the edges of the box.</li>
</ul>
<p>The horizontal orientation I’ve chosen here clarifies the relationship of direction of skew to the plot. A plot like this, with multiple outliers on the right side is indicative of a long right tail in the distribution, and hence, positive or right skew - with the mean being larger than the median. Other indications of skew include having one side of the box being substantially wider than the other, or one side of the whiskers being substantially longer than the other. More on skew later.</p>
</section>
</section>
<section id="a-simple-comparison-boxplot" class="level2" data-number="10.11">
<h2 data-number="10.11" class="anchored" data-anchor-id="a-simple-comparison-boxplot"><span class="header-section-number">10.11</span> A Simple Comparison Boxplot</h2>
<p>Boxplots are most often used for comparison. We can build boxplots using <code>ggplot2</code>, as well, and we’ll discuss that in detail later. For now, here’s a boxplot built to compare the <code>energy</code> results by the subject’s race/ethnicity.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(race_eth), <span class="at">y =</span> energy, <span class="at">fill=</span><span class="fu">factor</span>(race_eth))) <span class="sc">+</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Energy consumed (kcal)"</span>, <span class="at">x =</span> <span class="st">"Race/Ethnicity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_box2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s look at the comparison of observed <code>energy</code> levels across the five categories in our <code>phys_health</code> variable, now making use of the <code>viridis</code> color scheme.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(phys_health), <span class="at">y =</span> energy, <span class="at">fill =</span> <span class="fu">factor</span>(phys_health))) <span class="sc">+</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span> </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Energy by Self-Reported Physical Health, in nnyfs data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_box3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As a graph, that’s not bad, but what if we want to improve it further?</p>
<p>Let’s turn the boxes in the horizontal direction, and get rid of the perhaps unnecessary <code>phys_health</code> labels.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(phys_health), <span class="at">y =</span> energy, <span class="at">fill =</span> <span class="fu">factor</span>(phys_health))) <span class="sc">+</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span> </span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Energy Consumed by Self-Reported Physical Health"</span>, </span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"NHANES National Youth Fitness Survey, unweighted"</span>, </span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_nnyfs_en_box4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="using-describe-in-the-psych-library" class="level2" data-number="10.12">
<h2 data-number="10.12" class="anchored" data-anchor-id="using-describe-in-the-psych-library"><span class="header-section-number">10.12</span> Using <code>describe</code> in the <code>psych</code> library</h2>
<p>For additional numerical summaries, one option would be to consider using the <code>describe</code> function from the <code>psych</code> library.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(nnyfs<span class="sc">$</span>energy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars    n    mean     sd median trimmed    mad min  max range skew kurtosis
X1    1 1518 1877.16 722.35 1794.5  1827.1 678.29 257 5265  5008  0.8     1.13
      se
X1 18.54</code></pre>
</div>
</div>
<p>This package provides, in order, the following…</p>
<ul>
<li><code>n</code> = the sample size</li>
<li><code>mean</code> = the sample mean</li>
<li><code>sd</code> = the sample standard deviation</li>
<li><code>median</code> = the median, or 50th percentile</li>
<li><code>trimmed</code> = mean of the middle 80% of the data</li>
<li><code>mad</code> = median absolute deviation</li>
<li><code>min</code> = minimum value in the sample</li>
<li><code>max</code> = maximum value in the sample</li>
<li><code>range</code> = max - min</li>
<li><code>skew</code> = skewness measure, described below (indicates degree of asymmetry)</li>
<li><code>kurtosis</code> = kurtosis measure, described below (indicates heaviness of tails, degree of outlier-proneness)</li>
<li><code>se</code> = standard error of the sample mean = sd / square root of sample size, useful in inference</li>
</ul>
<section id="the-trimmed-mean" class="level3" data-number="10.12.1">
<h3 data-number="10.12.1" class="anchored" data-anchor-id="the-trimmed-mean"><span class="header-section-number">10.12.1</span> The Trimmed Mean</h3>
<p>The <strong>trimmed mean</strong> trim value in R indicates proportion of observations to be trimmed from each end of the outcome distribution before the mean is calculated. The <code>trimmed</code> value provided by the <code>psych::describe</code> package describes what this particular package calls a 20% trimmed mean (bottom and top 10% of <code>energy</code> values are removed before taking the mean - it’s the mean of the middle 80% of the data.) I might call that a 10% trimmed mean in some settings, but that’s just me.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(nnyfs<span class="sc">$</span>energy, <span class="at">trim=</span>.<span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1827.1</code></pre>
</div>
</div>
</section>
<section id="the-median-absolute-deviation" class="level3" data-number="10.12.2">
<h3 data-number="10.12.2" class="anchored" data-anchor-id="the-median-absolute-deviation"><span class="header-section-number">10.12.2</span> The Median Absolute Deviation</h3>
<p>An alternative to the IQR that is fancier, and a bit more robust, is the <strong>median absolute deviation</strong>, which, in large sample sizes, for data that follow a Normal distribution, will be (in expectation) equal to the standard deviation. The MAD is the median of the absolute deviations from the median, multiplied by a constant (1.4826) to yield asymptotically normal consistency.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mad</span>(nnyfs<span class="sc">$</span>energy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 678.2895</code></pre>
</div>
</div>
</section>
</section>
<section id="assessing-skew" class="level2" data-number="10.13">
<h2 data-number="10.13" class="anchored" data-anchor-id="assessing-skew"><span class="header-section-number">10.13</span> Assessing Skew</h2>
<p>A relatively common idea is to assess <strong>skewness</strong>, several measures of which are available. Many models assume a Normal distribution, where, among other things, the data are symmetric around the mean.</p>
<p>Skewness measures asymmetry in the distribution, where left skew (mean &lt; median) is indicated by negative skewness values, while right skew (mean &gt; median) is indicated by positive values. The skew value will be near zero for data that follow a symmetric distribution.</p>
<section id="non-parametric-skewness" class="level3" data-number="10.13.1">
<h3 data-number="10.13.1" class="anchored" data-anchor-id="non-parametric-skewness"><span class="header-section-number">10.13.1</span> Non-parametric Skewness</h3>
<p>A simpler measure of skew, sometimes called the <strong>nonparametric skew</strong> and closely related to Pearson’s notion of median skewness, falls between -1 and +1 for any distribution. It is just the difference between the mean and the median, divided by the standard deviation.</p>
<ul>
<li>Values greater than +0.2 are sometimes taken to indicate fairly substantial right skew, while values below -0.2 indicate fairly substantial left skew.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">mean</span>(nnyfs<span class="sc">$</span>energy) <span class="sc">-</span> <span class="fu">median</span>(nnyfs<span class="sc">$</span>energy))<span class="sc">/</span><span class="fu">sd</span>(nnyfs<span class="sc">$</span>energy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.114427</code></pre>
</div>
</div>
<p><a href="https://en.wikipedia.org/wiki/Skewness">The Wikipedia page on skewness</a>, from which some of this material is derived, provides definitions for several other skewness measures.</p>
</section>
</section>
<section id="assessing-kurtosis-heavy-tailedness" class="level2" data-number="10.14">
<h2 data-number="10.14" class="anchored" data-anchor-id="assessing-kurtosis-heavy-tailedness"><span class="header-section-number">10.14</span> Assessing Kurtosis (Heavy-Tailedness)</h2>
<p>Another measure of a distribution’s shape that can be found in the <code>psych</code> library is the <strong>kurtosis</strong>. Kurtosis is an indicator of whether the distribution is heavy-tailed or light-tailed as compared to a Normal distribution. Positive kurtosis means more of the variance is due to outliers - unusual points far away from the mean relative to what we might expect from a Normally distributed data set with the same standard deviation.</p>
<ul>
<li>A Normal distribution will have a kurtosis value near 0, a distribution with similar tail behavior to what we would expect from a Normal is said to be <em>mesokurtic</em></li>
<li>Higher kurtosis values (meaningfully higher than 0) indicate that, as compared to a Normal distribution, the observed variance is more the result of extreme outliers (i.e.&nbsp;heavy tails) as opposed to being the result of more modest sized deviations from the mean. These heavy-tailed, or outlier prone, distributions are sometimes called <em>leptokurtic</em>.</li>
<li>Kurtosis values meaningfully lower than 0 indicate light-tailed data, with fewer outliers than we’d expect in a Normal distribution. Such distributions are sometimes referred to as <em>platykurtic</em>, and include distributions without outliers, like the Uniform distribution.</li>
</ul>
<p>Here’s a table:</p>
<table class="table">
<colgroup>
<col style="width: 37%">
<col style="width: 26%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Fewer outliers than a Normal</th>
<th style="text-align: center;">Approximately Normal</th>
<th style="text-align: center;">More outliers than a Normal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Light-tailed</td>
<td style="text-align: center;">“Normalish”</td>
<td style="text-align: center;">Heavy-tailed</td>
</tr>
<tr class="even">
<td style="text-align: center;"><em>platykurtic</em> (kurtosis &lt; 0)</td>
<td style="text-align: center;"><em>mesokurtic</em> (kurtosis = 0)</td>
<td style="text-align: center;"><em>leptokurtic</em> (kurtosis &gt; 0)</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">kurtosi</span>(nnyfs<span class="sc">$</span>energy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.130539</code></pre>
</div>
</div>
<p>Note that the <code>kurtosi()</code> function is strangely named, and is part of the <code>psych</code> package.</p>
<section id="the-standard-error-of-the-sample-mean" class="level3" data-number="10.14.1">
<h3 data-number="10.14.1" class="anchored" data-anchor-id="the-standard-error-of-the-sample-mean"><span class="header-section-number">10.14.1</span> The Standard Error of the Sample Mean</h3>
<p>The <strong>standard error</strong> of the sample mean, which is the standard deviation divided by the square root of the sample size:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(nnyfs<span class="sc">$</span>energy)<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">length</span>(nnyfs<span class="sc">$</span>energy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18.54018</code></pre>
</div>
</div>
</section>
</section>
<section id="the-describe-function-in-the-hmisc-package" class="level2" data-number="10.15">
<h2 data-number="10.15" class="anchored" data-anchor-id="the-describe-function-in-the-hmisc-package"><span class="header-section-number">10.15</span> The <code>describe</code> function in the <code>Hmisc</code> package</h2>
<p>The <code>Hmisc</code> package has lots of useful functions. It’s named for its main developer, Frank Harrell. The <code>describe</code> function in <code>Hmisc</code> knows enough to separate numerical from categorical variables, and give you separate (and detailed) summaries for each.</p>
<ul>
<li>For a categorical variable, it provides counts of total observations (n), the number of missing values, and the number of unique categories, along with counts and percentages falling in each category.</li>
<li>For a numerical variable, it provides:</li>
<li>counts of total observations (n), the number of missing values, and the number of unique values</li>
<li>an Info value for the data, which indicates how continuous the variable is (a score of 1 is generally indicative of a completely continuous variable with no ties, while scores near 0 indicate lots of ties, and very few unique values)</li>
<li>the sample Mean</li>
<li>Gini’s mean difference, which is a robust measure of spread, with larger values indicating greater dispersion in the data. It is defined as the mean absolute difference between any pairs of observations.</li>
<li>many sample percentiles (quantiles) of the data, specifically (5, 10, 25, 50, 75, 90, 95, 99)</li>
<li>either a complete table of all observed values, with counts and percentages (if there are a modest number of unique values), or</li>
<li>a table of the five smallest and five largest values in the data set, which is useful for range checking</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(waist, energy, bmi) <span class="sc">|&gt;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  Hmisc<span class="sc">::</span><span class="fu">describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>select(nnyfs, waist, energy, bmi) 

 3  Variables      1518  Observations
--------------------------------------------------------------------------------
waist 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
    1512        6      510        1    67.71     16.6    49.40    51.40 
     .25      .50      .75      .90      .95 
   55.60    64.80    76.60    88.70    96.84 

lowest :  42.5  43.4  44.1  44.4  44.5, highest: 125.8 126.0 127.0 132.3 144.7
--------------------------------------------------------------------------------
energy 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
    1518        0     1137        1     1877    796.1      849     1047 
     .25      .50      .75      .90      .95 
    1368     1794     2306     2795     3195 

lowest :  257  260  326  349  392, highest: 4382 4529 5085 5215 5265
--------------------------------------------------------------------------------
bmi 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
    1514        4      225        1    19.63    5.269    14.30    14.90 
     .25      .50      .75      .90      .95 
   15.90    18.10    21.90    26.27    30.20 

lowest : 11.9 12.6 12.7 12.9 13.0, highest: 42.8 43.0 46.9 48.2 48.3
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>More on the <code>Info</code> value in Hmisc::describe is <a href="https://cran.r-project.org/web/packages/Hmisc/Hmisc.pdf#page=67">available here</a></p>
</section>
<section id="summarizing-data-within-subgroups" class="level2" data-number="10.16">
<h2 data-number="10.16" class="anchored" data-anchor-id="summarizing-data-within-subgroups"><span class="header-section-number">10.16</span> Summarizing data within subgroups</h2>
<p>Suppose we want to understand how the subjects whose diet involved consuming much more than usual yesterday compare to those who consumer their usual amount, or to those who consumed much less than usual, in terms of the energy they consumed, as well as the protein. We might start by looking at the medians and means.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(diet_yesterday) <span class="sc">|&gt;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(diet_yesterday, energy, protein) <span class="sc">|&gt;</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise_all</span>(<span class="fu">list</span>(<span class="at">median =</span> median, <span class="at">mean =</span> mean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  diet_yesterday         energy_median protein_median energy_mean protein_mean
  &lt;fct&gt;                          &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
1 1_Much more than usual          2098           69.4       2150.         75.1
2 2_Usual                         1794           61.3       1858.         67.0
3 3_Much less than usual          1643           53.9       1779.         60.1
4 &lt;NA&gt;                            4348          155.        4348         155. </code></pre>
</div>
</div>
<p>Perhaps we should restrict ourselves to the people who were not missing the <code>diet_yesterday</code> category, and look now at their <code>sugar</code> and <code>water</code> consumption.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(diet_yesterday)) <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(diet_yesterday) <span class="sc">|&gt;</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(diet_yesterday, energy, protein, sugar, water) <span class="sc">|&gt;</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise_all</span>(<span class="fu">list</span>(median))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  diet_yesterday         energy protein sugar water
  &lt;fct&gt;                   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 1_Much more than usual   2098    69.4  137.  500 
2 2_Usual                  1794    61.3  114.  385.
3 3_Much less than usual   1643    53.9  115.  311.</code></pre>
</div>
</div>
<p>It looks like the children in the “Much more than usual” category consumed more energy, protein, sugar and water than the children in the other two categories. Let’s draw a picture of this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>temp_dat <span class="ot">&lt;-</span> nnyfs <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(diet_yesterday)) <span class="sc">|&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">diet_yesterday =</span> <span class="fu">fct_recode</span>(diet_yesterday,</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Much more"</span> <span class="ot">=</span> <span class="st">"1_Much more than usual"</span>,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Usual diet"</span> <span class="ot">=</span> <span class="st">"2_Usual"</span>,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Much less"</span> <span class="ot">=</span> <span class="st">"3_Much less than usual"</span>))</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(temp_dat, <span class="fu">aes</span>(<span class="at">x =</span> diet_yesterday, <span class="at">y =</span> energy)) <span class="sc">+</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> diet_yesterday), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Energy Comparison"</span>)</span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(temp_dat, <span class="fu">aes</span>(<span class="at">x =</span> diet_yesterday, <span class="at">y =</span> protein)) <span class="sc">+</span></span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> diet_yesterday), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb82-22"><a href="#cb82-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Protein Comparison"</span>)</span>
<span id="cb82-23"><a href="#cb82-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-24"><a href="#cb82-24" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(temp_dat, <span class="fu">aes</span>(<span class="at">x =</span> diet_yesterday, <span class="at">y =</span> sugar)) <span class="sc">+</span></span>
<span id="cb82-25"><a href="#cb82-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb82-26"><a href="#cb82-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> diet_yesterday), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb82-27"><a href="#cb82-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb82-28"><a href="#cb82-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb82-29"><a href="#cb82-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb82-30"><a href="#cb82-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sugar Comparison"</span>)</span>
<span id="cb82-31"><a href="#cb82-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-32"><a href="#cb82-32" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(temp_dat, <span class="fu">aes</span>(<span class="at">x =</span> diet_yesterday, <span class="at">y =</span> water)) <span class="sc">+</span></span>
<span id="cb82-33"><a href="#cb82-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb82-34"><a href="#cb82-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> diet_yesterday), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb82-35"><a href="#cb82-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb82-36"><a href="#cb82-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb82-37"><a href="#cb82-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb82-38"><a href="#cb82-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Water Comparison"</span>)</span>
<span id="cb82-39"><a href="#cb82-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-40"><a href="#cb82-40" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> p3 <span class="sc">+</span> p4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that there is considerable overlap in these distributions, regardless of what we’re measuring.</p>
</section>
<section id="another-example" class="level2" data-number="10.17">
<h2 data-number="10.17" class="anchored" data-anchor-id="another-example"><span class="header-section-number">10.17</span> Another Example</h2>
<p>Suppose now that we ask a different question. Do kids in larger categories of BMI have larger waist circumferences?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(bmi_cat) <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(waist), <span class="at">sd =</span> <span class="fu">sd</span>(waist), </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">median =</span> <span class="fu">median</span>(waist), </span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">skew_1 =</span> <span class="fu">round</span>((<span class="fu">mean</span>(waist) <span class="sc">-</span> <span class="fu">median</span>(waist)) <span class="sc">/</span> </span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="fu">sd</span>(waist),<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  bmi_cat        mean    sd median skew_1
  &lt;fct&gt;         &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 1_Underweight  55.2  7.58   54.5   0.09
2 2_Normal       NA   NA      NA    NA   
3 3_Overweight   72.3 11.9    74    -0.14
4 4_Obese        NA   NA      NA    NA   
5 &lt;NA&gt;           NA   NA      NA    NA   </code></pre>
</div>
</div>
<p>Oops. Looks like we need to filter for cases with complete data on both BMI category and waist circumference in order to get meaningful results. We should add a count, too.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, waist)) <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(bmi_cat) <span class="sc">|&gt;</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">mean =</span> <span class="fu">mean</span>(waist), </span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd =</span> <span class="fu">sd</span>(waist), <span class="at">median =</span> <span class="fu">median</span>(waist), </span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">skew_1 =</span> </span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>         <span class="fu">round</span>((<span class="fu">mean</span>(waist) <span class="sc">-</span> <span class="fu">median</span>(waist)) <span class="sc">/</span> <span class="fu">sd</span>(waist),<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  bmi_cat       count  mean    sd median skew_1
  &lt;fct&gt;         &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 1_Underweight    41  55.2  7.58   54.5   0.09
2 2_Normal        917  61.2  9.35   59.5   0.19
3 3_Overweight    258  72.3 11.9    74    -0.14
4 4_Obese         294  85.6 17.1    86.8  -0.07</code></pre>
</div>
</div>
<p>Or, we could use something like <code>favstats</code> from the <code>mosaic</code> package, which automatically accounts for missing data, and omits it when calculating summary statistics within each group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>mosaic<span class="sc">::</span><span class="fu">favstats</span>(waist <span class="sc">~</span> bmi_cat, <span class="at">data =</span> nnyfs) <span class="sc">|&gt;</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 21%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">bmi_cat</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">Q1</th>
<th style="text-align: right;">median</th>
<th style="text-align: right;">Q3</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1_Underweight</td>
<td style="text-align: right;">42.5</td>
<td style="text-align: right;">49.3</td>
<td style="text-align: right;">54.5</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">68.5</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">7.6</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">2_Normal</td>
<td style="text-align: right;">44.1</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: right;">59.5</td>
<td style="text-align: right;">68.4</td>
<td style="text-align: right;">89.2</td>
<td style="text-align: right;">61.2</td>
<td style="text-align: right;">9.4</td>
<td style="text-align: right;">917</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3_Overweight</td>
<td style="text-align: right;">49.3</td>
<td style="text-align: right;">62.3</td>
<td style="text-align: right;">74.0</td>
<td style="text-align: right;">81.2</td>
<td style="text-align: right;">105.3</td>
<td style="text-align: right;">72.3</td>
<td style="text-align: right;">11.9</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">4_Obese</td>
<td style="text-align: right;">52.1</td>
<td style="text-align: right;">72.7</td>
<td style="text-align: right;">86.8</td>
<td style="text-align: right;">96.8</td>
<td style="text-align: right;">144.7</td>
<td style="text-align: right;">85.6</td>
<td style="text-align: right;">17.1</td>
<td style="text-align: right;">294</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>While patients in the heavier groups generally had higher waist circumferences, the standard deviations suggest there may be some meaningful overlap. Let’s draw the picture, in this case a comparison boxplot accompanying a violin plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, waist)) <span class="sc">%&gt;%</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> bmi_cat, <span class="at">y =</span> waist)) <span class="sc">+</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> bmi_cat), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Waist Circumference by BMI Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Note the use of the %&gt;% pipe here. I need to write more about this.</p>
<p>The data transformation with dplyr cheat sheet found under the Help menu in RStudio is a great resource. And, of course, for more details, visit <span class="citation" data-cites="R4DS">Wickham and Grolemund (<a href="references.html#ref-R4DS" role="doc-biblioref">2022</a>)</span>.</p>
</section>
<section id="boxplots-to-relate-an-outcome-to-a-categorical-predictor" class="level2" data-number="10.18">
<h2 data-number="10.18" class="anchored" data-anchor-id="boxplots-to-relate-an-outcome-to-a-categorical-predictor"><span class="header-section-number">10.18</span> Boxplots to Relate an Outcome to a Categorical Predictor</h2>
<p>Boxplots are much more useful when comparing samples of data. For instance, consider this comparison boxplot describing the triceps skinfold results across the four levels of BMI category.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nnyfs, <span class="fu">aes</span>(<span class="at">x =</span> bmi_cat, <span class="at">y =</span> triceps_skinfold,</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (stat_boxplot).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Again, we probably want to omit those missing values (both in <code>bmi_cat</code> and <code>triceps_skinfold</code>) and also eliminate the repetitive legend (guides) on the right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, triceps_skinfold)) <span class="sc">%&gt;%</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> bmi_cat, <span class="at">y =</span> triceps_skinfold,</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"BMI Category"</span>, <span class="at">y =</span> <span class="st">"Triceps Skinfold in mm"</span>,</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Triceps Skinfold increases with BMI category"</span>,</span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"NNYFS children"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As always, the boxplot shows the five-number summary (minimum, 25th percentile, median, 75th percentile and maximum) in addition to highlighting candidate outliers.</p>
<section id="augmenting-the-boxplot-with-the-sample-mean" class="level3" data-number="10.18.1">
<h3 data-number="10.18.1" class="anchored" data-anchor-id="augmenting-the-boxplot-with-the-sample-mean"><span class="header-section-number">10.18.1</span> Augmenting the Boxplot with the Sample Mean</h3>
<p>Often, we want to augment such a plot, perhaps by adding a little diamond to show the <strong>sample mean</strong> within each category, so as to highlight skew (in terms of whether the mean is meaningfully different from the median.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, triceps_skinfold)) <span class="sc">%&gt;%</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> bmi_cat, <span class="at">y =</span> triceps_skinfold,</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">fun=</span><span class="st">"mean"</span>, <span class="at">geom=</span><span class="st">"point"</span>, </span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">shape=</span><span class="dv">23</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">fill=</span><span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"BMI Category"</span>, <span class="at">y =</span> <span class="st">"Triceps Skinfold in mm"</span>,</span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Triceps Skinfold increases with BMI category"</span>,</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"NNYFS children"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="building-a-violin-plot" class="level2" data-number="10.19">
<h2 data-number="10.19" class="anchored" data-anchor-id="building-a-violin-plot"><span class="header-section-number">10.19</span> Building a Violin Plot</h2>
<p>There are a number of other plots which compare distributions of data sets. An interesting one is called a <strong>violin plot</strong>. A violin plot is a kernel density estimate, mirrored to form a symmetrical shape.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(triceps_skinfold, bmi_cat)) <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>bmi_cat, <span class="at">y=</span>triceps_skinfold, </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span> </span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">trim=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Triceps Skinfold by BMI Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Traditionally, these plots are shown with overlaid boxplots and a white dot at the median, like this example, now looking at waist circumference again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(waist, bmi_cat)) <span class="sc">%&gt;%</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> bmi_cat, <span class="at">y =</span> waist, </span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span> </span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">trim=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width=</span>.<span class="dv">1</span>, <span class="at">outlier.colour=</span><span class="cn">NA</span>, </span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"white"</span>,<span class="dv">2</span>), <span class="fu">rep</span>(<span class="st">"black"</span>,<span class="dv">2</span>))) <span class="sc">+</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">fun=</span>median, <span class="at">geom=</span><span class="st">"point"</span>, </span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill=</span><span class="st">"white"</span>, <span class="at">shape=</span><span class="dv">21</span>, <span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Waist Circumference by BMI Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="adding-notches-to-a-boxplot" class="level3" data-number="10.19.1">
<h3 data-number="10.19.1" class="anchored" data-anchor-id="adding-notches-to-a-boxplot"><span class="header-section-number">10.19.1</span> Adding Notches to a Boxplot</h3>
<p><strong>Notches</strong> are used in boxplots to help visually assess whether the medians of the distributions across the various groups actually differ to a statistically detectable extent. Think of them as confidence regions around the medians. If the notches do not overlap, as in this situation, this provides some evidence that the medians in the populations represented by these samples may be different.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, triceps_skinfold)) <span class="sc">%&gt;%</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> bmi_cat, <span class="at">y =</span> triceps_skinfold)) <span class="sc">+</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> bmi_cat), <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">notch =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"BMI Category"</span>, <span class="at">y =</span> <span class="st">"Triceps Skinfold in mm"</span>,</span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Triceps Skinfold increases with BMI category"</span>,</span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"NNYFS children"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There is no overlap between the notches for each of the four categories, so we might reasonably conclude that the true median triceps skinfold values across the four categories are statistically significantly different.</p>
<p>For an example where the notches do overlap, consider the comparison of plank times by BMI category.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, plank_time)) <span class="sc">%&gt;%</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>bmi_cat, <span class="at">y=</span>plank_time)) <span class="sc">+</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> bmi_cat)) <span class="sc">+</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">notch=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Plank Times by BMI category"</span>, </span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Plank Time (in seconds)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The overlap in the notches (for instance between Underweight and Normal) suggests that the median plank times in the population of interest don’t necessarily differ in a meaningful way by BMI category, other than perhaps the Obese group which may have a shorter time.</p>
<p>These data are somewhat right skewed. Would a logarithmic transformation in the plot help us see the patterns more clearly?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, plank_time)) <span class="sc">%&gt;%</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>bmi_cat, <span class="at">y =</span> <span class="fu">log</span>(plank_time))) <span class="sc">+</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> bmi_cat), <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">notch=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"log(Plank Times) by BMI category"</span>, </span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Natural Log of Plank Time"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="using-multiple-histograms-to-make-comparisons" class="level2" data-number="10.20">
<h2 data-number="10.20" class="anchored" data-anchor-id="using-multiple-histograms-to-make-comparisons"><span class="header-section-number">10.20</span> Using Multiple Histograms to Make Comparisons</h2>
<p>We can make an array of histograms to describe multiple groups of data, using <code>ggplot2</code> and the notion of <strong>faceting</strong> our plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(triceps_skinfold, bmi_cat)) <span class="sc">%&gt;%</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>triceps_skinfold, <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> bmi_cat) <span class="sc">+</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Triceps Skinfold by BMI Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="using-multiple-density-plots-to-make-comparisons" class="level2" data-number="10.21">
<h2 data-number="10.21" class="anchored" data-anchor-id="using-multiple-density-plots-to-make-comparisons"><span class="header-section-number">10.21</span> Using Multiple Density Plots to Make Comparisons</h2>
<p>Or, we can make a series of density plots to describe multiple groups of data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(triceps_skinfold, bmi_cat)) <span class="sc">%&gt;%</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>triceps_skinfold, <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> bmi_cat) <span class="sc">+</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Triceps Skinfold by BMI Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Or, we can plot all of the densities on top of each other with semi-transparent fills.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(triceps_skinfold, bmi_cat)) <span class="sc">%&gt;%</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>triceps_skinfold, <span class="at">fill =</span> bmi_cat)) <span class="sc">+</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha=</span><span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span> </span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Triceps Skinfold by BMI Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This really works better when we are comparing only two groups, like females to males.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(triceps_skinfold, sex)) <span class="sc">%&gt;%</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>triceps_skinfold, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Triceps Skinfold by Sex"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="a-ridgeline-plot" class="level2" data-number="10.22">
<h2 data-number="10.22" class="anchored" data-anchor-id="a-ridgeline-plot"><span class="header-section-number">10.22</span> A Ridgeline Plot</h2>
<p>Some people don’t like violin plots - for example, see https://simplystatistics.org/2017/07/13/the-joy-of-no-more-violin-plots/. An alternative plot is available as part of the <code>ggridges</code> package. This shows the distribution of several groups simultaneously, especially when you have lots of subgroup categories, and is called a <strong>ridgeline plot</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span> </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(waist, bmi_cat)) <span class="sc">%&gt;%</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> waist, <span class="at">y =</span> bmi_cat, <span class="at">height =</span> ..density..)) <span class="sc">+</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    ggridges<span class="sc">::</span><span class="fu">geom_density_ridges</span>(<span class="at">scale =</span> <span class="fl">0.85</span>) <span class="sc">+</span> </span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Ridgeline Plot of Waist Circumference by BMI category (nnyfs)"</span>,</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Waist Circumference"</span>, <span class="at">y =</span> <span class="st">"BMI Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 3.47</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And here’s a ridgeline plot for the triceps skinfolds. We’ll start by sorting the subgroups by the median value of our outcome (triceps skinfold) in this case, though it turns out not to matter. We’ll also add some color.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, triceps_skinfold)) <span class="sc">|&gt;</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">bmi_cat =</span> <span class="fu">fct_reorder</span>(bmi_cat,</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>                                 triceps_skinfold, </span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">.fun =</span> median)) <span class="sc">%&gt;%</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x =</span> triceps_skinfold, <span class="at">y =</span> bmi_cat, </span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> bmi_cat, <span class="at">height =</span> ..density..)) <span class="sc">+</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>    ggridges<span class="sc">::</span><span class="fu">geom_density_ridges</span>(<span class="at">scale =</span> <span class="fl">0.85</span>) <span class="sc">+</span> </span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"magma"</span>) <span class="sc">+</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Ridgeline Plot of Triceps Skinfold by BMI Category (nnyfs)"</span>,</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Triceps Skinfold"</span>, <span class="at">y =</span> <span class="st">"BMI Category"</span>) <span class="sc">+</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 1.37</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For one last example, we’ll look at age by BMI category, so that sorting the BMI subgroups by the median matters, and we’ll try an alternate color scheme, and a theme specially designed for the ridgeline plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>nnyfs <span class="sc">|&gt;</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">complete.cases</span>(bmi_cat, age_child)) <span class="sc">|&gt;</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">bmi_cat =</span> <span class="fu">reorder</span>(bmi_cat, age_child, median)) <span class="sc">%&gt;%</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age_child, <span class="at">y =</span> bmi_cat, <span class="at">fill =</span> bmi_cat, <span class="at">height =</span> ..density..)) <span class="sc">+</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    ggridges<span class="sc">::</span><span class="fu">geom_density_ridges</span>(<span class="at">scale =</span> <span class="fl">0.85</span>) <span class="sc">+</span> </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>) <span class="sc">+</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Ridgeline Plot of Age at Exam by BMI category (nnyfs)"</span>,</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Age of Child at Exam"</span>, <span class="at">y =</span> <span class="st">"BMI Category"</span>) <span class="sc">+</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>    ggridges<span class="sc">::</span><span class="fu">theme_ridges</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 1.15</code></pre>
</div>
<div class="cell-output-display">
<p><img src="10-nnyfs_foundations_files/figure-html/c9_subgr_22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="what-summaries-to-report" class="level2" data-number="10.23">
<h2 data-number="10.23" class="anchored" data-anchor-id="what-summaries-to-report"><span class="header-section-number">10.23</span> What Summaries to Report</h2>
<p>It is usually helpful to focus on the shape, center and spread of a distribution. Bock, Velleman and DeVeaux provide some useful advice:</p>
<ul>
<li>If the data are skewed, report the median and IQR (or the three middle quantiles). You may want to include the mean and standard deviation, but you should point out why the mean and median differ. The fact that the mean and median do not agree is a sign that the distribution may be skewed. A histogram will help you make that point.</li>
<li>If the data are symmetric, report the mean and standard deviation, and possibly the median and IQR as well.</li>
<li>If there are clear outliers and you are reporting the mean and standard deviation, report them with the outliers present and with the outliers removed. The differences may be revealing. The median and IQR are not likely to be seriously affected by outliers.</li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-R4DS" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, and Garrett Grolemund. 2022. <em>R for Data Science</em>. Second. O’Reilly. <a href="https://r4ds.hadley.nz/">https://r4ds.hadley.nz/</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./09-missing_data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Missing Data and Single Imputation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./11-assessingnormality.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Assessing Normality</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>